#!/bin/bash

# Tic-Tac-Toe äº•å­—æ£‹æ¸¸æˆç³»ç»Ÿæ¼”ç¤ºè„šæœ¬
# å±•ç¤ºæ‰€æœ‰ç”Ÿå‘½æ¸¸æˆçš„æ´»åŠ›è¿è¡Œ

echo "ðŸŽ® Tic-Tac-Toe äº•å­—æ£‹æ¸¸æˆç³»ç»Ÿæ¼”ç¤º"
echo "=================================================="
echo ""

# æ£€æŸ¥å¯æ‰§è¡Œæ–‡ä»¶æ˜¯å¦å­˜åœ¨
if [ ! -f "./target/release/tic-tac-toe" ]; then
    echo "âŒ tic-tac-toe å¯æ‰§è¡Œæ–‡ä»¶ä¸å­˜åœ¨ï¼Œæ­£åœ¨æž„å»º..."
    cargo build --bin tic-tac-toe --release
    if [ $? -ne 0 ]; then
        echo "âŒ æž„å»ºå¤±è´¥"
        exit 1
    fi
    echo "âœ… æž„å»ºå®Œæˆ"
fi

echo "ðŸ“Š ç³»ç»Ÿä¿¡æ¯:"
echo "  å¯æ‰§è¡Œæ–‡ä»¶å¤§å°: $(ls -lh ./target/release/tic-tac-toe | awk '{print $5}')"
echo "  æž„å»ºæ—¶é—´: $(stat -c %y ./target/release/tic-tac-toe)"
echo ""

echo "ðŸŽ¯ åŠŸèƒ½æ¼”ç¤º:"
echo "1. äº•å­—æ£‹æ¸¸æˆ (AIå¯¹æˆ˜)"
echo "2. ç”Ÿå‘½æ¸¸æˆç®¡ç†å™¨"
echo "3. ç†µæºç³»ç»Ÿé›†æˆ"
echo "4. ç»Ÿè®¡ä¿¡æ¯å±•ç¤º"
echo ""

echo "ðŸš€ å¯åŠ¨ç³»ç»Ÿæ¼”ç¤º..."
echo "æ³¨æ„: ç³»ç»Ÿå°†è‡ªåŠ¨æ¼”ç¤ºå„é¡¹åŠŸèƒ½"
echo ""

# åˆ›å»ºæ¼”ç¤ºè¾“å…¥
cat > demo_input.txt << EOF
2
3
5
6
0
EOF

echo "ðŸ“‹ æ¼”ç¤ºæµç¨‹:"
echo "  1. æŸ¥çœ‹ç”Ÿå‘½æ¸¸æˆåˆ—è¡¨"
echo "  2. è¿è¡Œæ‰€æœ‰ç”Ÿå‘½æ¸¸æˆ"
echo "  3. æŸ¥çœ‹ç»Ÿè®¡ä¿¡æ¯"
echo "  4. æŸ¥çœ‹ç†µæºä¿¡æ¯"
echo "  5. é€€å‡ºç³»ç»Ÿ"
echo ""

# è¿è¡Œæ¼”ç¤º
timeout 30s ./target/release/tic-tac-toe < demo_input.txt

echo ""
echo "ðŸŽ‰ æ¼”ç¤ºå®Œæˆï¼"
echo ""
echo "ðŸ’¡ æ‰‹åŠ¨è¿è¡Œæ–¹å¼:"
echo "  ./target/release/tic-tac-toe"
echo ""
echo "ðŸŽ® å¯ç”¨åŠŸèƒ½:"
echo "  1. çŽ©äº•å­—æ£‹ - ä¸ŽAIå¯¹æˆ˜"
echo "  2. æŸ¥çœ‹ç”Ÿå‘½æ¸¸æˆ - åˆ—å‡ºæ‰€æœ‰å¯ç”¨æ¸¸æˆ"
echo "  3. è¿è¡Œæ‰€æœ‰ç”Ÿå‘½æ¸¸æˆ - å¯åŠ¨æ‰€æœ‰ç”Ÿå‘½æ¸¸æˆ"
echo "  4. è¿è¡Œç‰¹å®šç”Ÿå‘½æ¸¸æˆ - é€‰æ‹©å•ä¸ªæ¸¸æˆè¿è¡Œ"
echo "  5. æŸ¥çœ‹ç»Ÿè®¡ä¿¡æ¯ - æ˜¾ç¤ºæ¸¸æˆç»Ÿè®¡"
echo "  6. æŸ¥çœ‹ç†µæºä¿¡æ¯ - æ˜¾ç¤ºç†µæºç³»ç»ŸçŠ¶æ€"
echo "  0. é€€å‡ºç³»ç»Ÿ"
echo ""

# æ¸…ç†æ¼”ç¤ºæ–‡ä»¶
rm -f demo_input.txt

echo "ðŸŒŸ ç³»ç»Ÿç‰¹è‰²:"
echo "  âœ… é›†æˆäº•å­—æ£‹AIå¯¹æˆ˜"
echo "  âœ… å¤šéš¾åº¦AIç­–ç•¥ (ç®€å•/ä¸­ç­‰/å›°éš¾)"
echo "  âœ… ç”Ÿå‘½æ¸¸æˆç®¡ç†å™¨"
echo "  âœ… å¤–éƒ¨ç†µæºé›†æˆ"
echo "  âœ… é‡å­æŠ—æ€§æŠ€æœ¯"
echo "  âœ… æ¦‚çŽ‡åˆ†å¸ƒä¼˜åŒ–"
echo "  âœ… å®žæ—¶ç»Ÿè®¡ç›‘æŽ§"
echo ""
echo "ðŸŽ¯ æ‰€æœ‰ç”Ÿå‘½æ¸¸æˆéƒ½èƒ½æœ‰æ´»åŠ›åœ°è¿è¡Œï¼"
